const _0x589ab7=_0x16c6;(function(_0x4e2285,_0x2594f3){const _0x18e2a3=_0x16c6,_0x41824e=_0x4e2285();while(!![]){try{const _0x3b6d4f=-parseInt(_0x18e2a3(0x142))/0x1+parseInt(_0x18e2a3(0x174))/0x2*(parseInt(_0x18e2a3(0x11b))/0x3)+parseInt(_0x18e2a3(0x14f))/0x4*(parseInt(_0x18e2a3(0x106))/0x5)+parseInt(_0x18e2a3(0x113))/0x6+-parseInt(_0x18e2a3(0x185))/0x7+-parseInt(_0x18e2a3(0x137))/0x8*(parseInt(_0x18e2a3(0x165))/0x9)+parseInt(_0x18e2a3(0x12b))/0xa*(parseInt(_0x18e2a3(0x13e))/0xb);if(_0x3b6d4f===_0x2594f3)break;else _0x41824e['push'](_0x41824e['shift']());}catch(_0x309be1){_0x41824e['push'](_0x41824e['shift']());}}}(_0x2288,0xecb46));const {fromBuffer}=require(_0x589ab7(0x13d)),sharp=require(_0x589ab7(0x189)),ffmpeg=require(_0x589ab7(0x132)),fs=require('fs'),{Image}=require(_0x589ab7(0x159)),{Exif}=require(_0x589ab7(0x122)),{randomBytes}=require(_0x589ab7(0x10b)),{isUrl,getBuffer}=require(_0x589ab7(0x116)),{removeBackgroundFromImageBase64,removeBackgroundFromImageUrl,removeBackgroundFromImageFile}=require(_0x589ab7(0x17b));let config=require(_0x589ab7(0x13a));const axios=require(_0x589ab7(0x117));let cropStyle=['rounded','circle',_0x589ab7(0x169),_0x589ab7(0x135),_0x589ab7(0x17f),'greyscale','grayscale'];const colourspace={'b-w':_0x589ab7(0x11d),'bw':_0x589ab7(0x11d),'cmyk':'cmyk','srgb':_0x589ab7(0x104)};function _0x2288(){const _0x5f1ce9=['crop','node-webpmux','log','removeBG','processAnimated','video','nearest','auto','-fs','BASE_URL','writeFileSync','categories','emojicdn','31707IuQkMa','remove.bg\x20api-key\x20did\x20not\x20set\x20yet','build','mime','nobg','toColourspace','extract','from','.webp','convertGif','exports','utf-8','toFormat','image/svg+xml','exif','450608zbXlHT','concat','Invalid\x20file\x20type','libwebp','hasOwnProperty','cropImage','./temp/video_','remove.bg','includes','scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','<svg\x20height=\x22485\x22\x20width=\x22485\x22><circle\x20cx=\x22242.5\x22\x20cy=\x22242.5\x22\x20r=\x22242.5\x22\x20fill=\x22#3a4458\x22/></svg>','pixelate','flip','data','forEach','processImage','-vcodec','7639310xAzErh','existsSync','/tools/emoji?text=','packId','sharp','composite','srgb','load','5fGdTle','inputOptions','floor','end','then','crypto','binary','_isAnimated','-vf','author','toString','contain','<svg><rect\x20x=\x220\x22\x20y=\x220\x22\x20width=\x22450\x22\x20height=\x22450\x22\x20rx=\x2250\x22\x20ry=\x2250\x22/></svg>','1395108PSeYws','addMetadata','greyscale','./index','axios','webpBase64','string','apple','12cyXuXl','resize','b-w','-vsync','processNoBG','lastIndexOf','cropVideo','./exif','-preset','buffer','arraybuffer','Not\x20a\x20Buffer','https://sticker-api.openwa.dev/prepareWebp','unlinkSync','save','post','30BXBIHg','emoji','status','./temp/','readFileSync','length','rotate','fluent-ffmpeg','_parse','format','negate','https://emojicdn.elk.sh/','1192lNXOgC','keys','crop=w=\x27min(min(iw,ih),500)\x27:h=\x27min(min(iw,ih),500)\x27,scale=500:500,setsar=1,fps=15','../utils/config.json','flop','-qscale','file-type','3330294PsZtSl','-an','_getMimeType','get','381938KFQeTp','simpleRemoveBg','catch','outputOptions','webp','png','test','gif','packname','default','complexFilter','?style=','512:512','3702964pebBBF','toBuffer','base64','create','-loop','toLowerCase','random','.mp4','hex'];_0x2288=function(){return _0x5f1ce9;};return _0x2288();}let cropType={'rounded':new Buffer[(_0x589ab7(0x16c))](_0x589ab7(0x112)),'circle':new Buffer['from'](_0x589ab7(0x17e))};cropStyle=cropStyle[_0x589ab7(0x175)](Object['keys'](colourspace));class Sticker{constructor(_0x5cd3d1,_0x386adf,_0xd4a3f1=undefined){const _0x559a86=_0x589ab7;this['data']=_0x5cd3d1,this['packname']=_0x386adf[_0x559a86(0x14a)],this[_0x559a86(0x10f)]=_0x386adf[_0x559a86(0x10f)],this[_0x559a86(0x188)]=_0x386adf['packId'],this[_0x559a86(0x163)]=_0x386adf['categories'],this[_0x559a86(0x158)]=cropStyle['includes'](_0xd4a3f1)?_0xd4a3f1:undefined;}['processImage']=async _0x2430de=>{const _0x43203c=_0x589ab7;return _0x2430de=this[_0x43203c(0x158)]===_0x43203c(0x17f)?await sharp(_0x2430de)[_0x43203c(0x11c)](0x14,null,{'kernel':_0x43203c(0x15e)})[_0x43203c(0x150)]():_0x2430de,new Promise((_0x4652db,_0x3dae51)=>{const _0x2bf210=_0x43203c;sharp(_0x2430de)[_0x2bf210(0x135)](this['crop']===_0x2bf210(0x135))[_0x2bf210(0x115)](/gr(e|a)yscale/[_0x2bf210(0x148)](this[_0x2bf210(0x158)]))[_0x2bf210(0x11c)](0x200,0x200,{'fit':_0x2bf210(0x111),'background':{'r':0x0,'g':0x0,'b':0x0,'alpha':0x0}})[_0x2bf210(0x16a)](Object['keys'](colourspace)[_0x2bf210(0x17c)](this['crop'])?colourspace[this[_0x2bf210(0x158)]]:'srgb')[_0x2bf210(0x171)]('webp')['toBuffer']()[_0x2bf210(0x10a)](_0x4652db)['catch'](_0x3dae51);});};static [_0x589ab7(0x131)]=async(_0x22e386,_0x156983)=>{if(!isNaN(_0x156983)&&_0x156983>0x168)throw'max\x20degrees\x20is\x20360';return new Promise((_0x156c64,_0x130847)=>{const _0x268ef3=_0x16c6;sharp(_0x22e386)[_0x268ef3(0x180)](_0x156983===_0x268ef3(0x180))[_0x268ef3(0x13b)](_0x156983===_0x268ef3(0x13b))[_0x268ef3(0x131)](/fl(o|i)p/[_0x268ef3(0x148)](_0x156983)?0x0:parseInt(_0x156983))[_0x268ef3(0x171)](_0x268ef3(0x147))[_0x268ef3(0x150)]()['then'](_0x156c64)[_0x268ef3(0x144)](_0x130847);});};[_0x589ab7(0x179)]=_0x19242a=>{return new Promise((_0x2c45aa,_0x54a099)=>{const _0x36abff=_0x16c6;sharp(_0x19242a)[_0x36abff(0x171)]('webp')[_0x36abff(0x11c)](0x200,0x200)[_0x36abff(0x18a)]([{'input':cropType[this[_0x36abff(0x158)]],'blend':'dest-in','cutout':!![]}])['toBuffer']()[_0x36abff(0x10a)](_0x2c45aa)[_0x36abff(0x144)](_0x54a099);});};static [_0x589ab7(0x16e)]=_0x440fa9=>{return new Promise((_0x5a6e57,_0x28d273)=>{const _0x3eea37=_0x16c6;sharp(_0x440fa9)[_0x3eea37(0x149)]()[_0x3eea37(0x150)]()['then'](_0x5a6e57)[_0x3eea37(0x144)](_0x28d273);});};[_0x589ab7(0x15c)]=async _0x18a37d=>{const _0x19ae1a=_0x589ab7;try{const _0xce8a22=_0x19ae1a(0x17a)+randomBytes(0x3)[_0x19ae1a(0x110)](_0x19ae1a(0x157))+'.mp4',_0x49835d='./temp/'+randomBytes(0x3)[_0x19ae1a(0x110)](_0x19ae1a(0x157))+_0x19ae1a(0x16d);fs['writeFileSync'](_0xce8a22,_0x18a37d[_0x19ae1a(0x110)](_0x19ae1a(0x10c)),_0x19ae1a(0x10c));const _0x68d690=await new Promise(_0x146714=>{const _0x47d7af=_0x19ae1a;ffmpeg(_0xce8a22)['inputOptions'](['-y','-t','20'])[_0x47d7af(0x14c)]([_0x47d7af(0x17d)])['outputOptions']([_0x47d7af(0x13c),'50',_0x47d7af(0x160),'1M','-vcodec',_0x47d7af(0x177),_0x47d7af(0x123),_0x47d7af(0x14b),_0x47d7af(0x153),'0',_0x47d7af(0x13f),_0x47d7af(0x11e),'0'])['format'](_0x47d7af(0x146))[_0x47d7af(0x129)](_0x49835d)['on']('end',()=>_0x146714(_0x49835d));}),_0x68ade0=fs[_0x19ae1a(0x12f)](_0x68d690);return[_0xce8a22,_0x49835d][_0x19ae1a(0x182)](_0x375856=>fs[_0x19ae1a(0x128)](_0x375856)),_0x68ade0;}catch(_0x4e156){console[_0x19ae1a(0x15a)](_0x4e156);}};static [_0x589ab7(0x12c)]=async(_0x5d0f56,_0x312db9=_0x589ab7(0x11a))=>{const _0x3012cd=_0x589ab7,_0xb9dea6=await axios[_0x3012cd(0x141)](config[_0x3012cd(0x161)]+_0x3012cd(0x187)+_0x5d0f56),_0x3d1bc5=_0xb9dea6['data'];if(_0x3d1bc5[_0x3012cd(0x12d)]&&_0x3d1bc5[_0x3012cd(0x181)])for(const _0x31a84b in _0x3d1bc5[_0x3012cd(0x181)]){if(_0x3d1bc5[_0x3012cd(0x181)][_0x3012cd(0x178)](_0x31a84b)&&_0x31a84b[_0x3012cd(0x154)]()===_0x312db9[_0x3012cd(0x154)]())return _0x3d1bc5[_0x3012cd(0x181)][_0x31a84b];}};static [_0x589ab7(0x164)]=async(_0x5366d3,_0x53a29f=_0x589ab7(0x11a))=>{const _0x29fb32=_0x589ab7,_0x454076=await axios[_0x29fb32(0x141)](_0x29fb32(0x136)+encodeURIComponent(_0x5366d3)+_0x29fb32(0x14d)+_0x53a29f,{'responseType':_0x29fb32(0x125)});if(_0x454076[_0x29fb32(0x12d)]!==0xc8)return'not\x20found';return _0x454076['data'];};static ['removeBG']=async _0xd09141=>{const _0x4349bb=_0x589ab7;try{if(config[_0x4349bb(0x15b)]=='')throw _0x4349bb(0x166);const _0x559d05=config[_0x4349bb(0x15b)]['split'](','),_0x41aab1=await removeBackgroundFromImageBase64({'base64img':_0xd09141[_0x4349bb(0x110)](_0x4349bb(0x151)),'apiKey':_0x559d05[Math[_0x4349bb(0x108)](Math[_0x4349bb(0x155)]()*_0x559d05['length'])],'size':_0x4349bb(0x15f),'type':_0x4349bb(0x15f)});return Buffer['from'](_0x41aab1['base64img'],_0x4349bb(0x151));}catch(_0x2de9fc){throw _0x2de9fc;}};[_0x589ab7(0x11f)]=async _0x1f2279=>{const _0x55ea48=_0x589ab7;try{const _0x560a59=await Sticker[_0x55ea48(0x15b)](await this[_0x55ea48(0x133)](_0x1f2279));return this[_0x55ea48(0x183)](_0x560a59);}catch(_0x13e71b){throw _0x13e71b;}};static [_0x589ab7(0x143)]=async _0x18bb88=>{const _0xbf6491=_0x589ab7;if(!Buffer['isBuffer'](_0x18bb88))throw _0xbf6491(0x126);const {data:_0x171854}=await axios[_0xbf6491(0x12a)](_0xbf6491(0x127),{'image':_0x18bb88[_0xbf6491(0x110)]('base64'),'stickerMetadata':{'removebg':!![]}},{'maxBodyLength':0x1312d00,'maxContentLength':0x16e360});return Buffer['from'](_0x171854[_0xbf6491(0x118)],_0xbf6491(0x151));};[_0x589ab7(0x121)]=async _0x20f32e=>{const _0x4f93bc=_0x589ab7;try{const _0x1d5308=_0x4f93bc(0x17a)+randomBytes(0x3)[_0x4f93bc(0x110)](_0x4f93bc(0x157))+_0x4f93bc(0x156),_0xe1e10=_0x4f93bc(0x12e)+randomBytes(0x3)[_0x4f93bc(0x110)](_0x4f93bc(0x157))+_0x4f93bc(0x16d);fs[_0x4f93bc(0x162)](_0x1d5308,_0x20f32e['toString'](_0x4f93bc(0x10c)),_0x4f93bc(0x10c));const _0x539f16=await new Promise(_0x47f446=>{const _0x5066a6=_0x4f93bc;ffmpeg(_0x1d5308)[_0x5066a6(0x107)](['-y','-t','20'])[_0x5066a6(0x145)]([_0x5066a6(0x184),_0x5066a6(0x177),_0x5066a6(0x10e),_0x5066a6(0x139),_0x5066a6(0x153),'0',_0x5066a6(0x123),'default',_0x5066a6(0x13f),_0x5066a6(0x11e),'0','-s',_0x5066a6(0x14e)])[_0x5066a6(0x134)](_0x5066a6(0x146))[_0x5066a6(0x129)](_0xe1e10)['on'](_0x5066a6(0x109),()=>_0x47f446(_0xe1e10));}),_0x2a7ede=fs[_0x4f93bc(0x12f)](_0x539f16);return[_0x1d5308,_0xe1e10][_0x4f93bc(0x182)](_0x12f5d4=>fs[_0x4f93bc(0x128)](_0x12f5d4)),_0x2a7ede;}catch(_0x44627d){console['log'](_0x44627d);}};[_0x589ab7(0x133)]=async(_0x42f9eb=this[_0x589ab7(0x181)])=>{const _0x3470aa=_0x589ab7;return Buffer['isBuffer'](_0x42f9eb)?_0x42f9eb:isUrl(_0x42f9eb)?(await getBuffer(_0x42f9eb))[_0x3470aa(0x124)]:fs[_0x3470aa(0x186)](_0x42f9eb)?fs[_0x3470aa(0x12f)](_0x42f9eb):_0x42f9eb;};[_0x589ab7(0x114)]=async _0x108a1e=>{const _0xefc56f=_0x589ab7,_0x7395b0=_0x108a1e||this[_0xefc56f(0x181)],_0x51c8a4=new Exif({'packname':this['packname'],'author':this[_0xefc56f(0x10f)],'packId':this['packId'],'categories':this[_0xefc56f(0x163)]})[_0xefc56f(0x152)](),_0x2c2751=new Image();return await _0x2c2751[_0xefc56f(0x105)](_0x7395b0),_0x2c2751[_0xefc56f(0x173)]=_0x51c8a4,await _0x2c2751['save'](null);};[_0x589ab7(0x140)]=async _0x404e35=>{const _0x43f716=_0x589ab7,_0xcf9a47=await fromBuffer(_0x404e35);if(!_0xcf9a47){if(typeof this['data']===_0x43f716(0x119))return _0x43f716(0x172);throw new Error(_0x43f716(0x176));}return _0xcf9a47[_0x43f716(0x168)];};[_0x589ab7(0x10d)]=_0x5d80ca=>{const _0x5cc6d5=_0x589ab7;var _0x492b34=[0x41,0x4e,0x49,0x4d];for(var _0x3ceb2d=0x0;_0x3ceb2d<_0x5d80ca['length'];_0x3ceb2d++){for(var _0x14a622=0x0;_0x14a622<_0x492b34[_0x5cc6d5(0x130)];_0x14a622++){if(_0x5d80ca[_0x3ceb2d+_0x14a622]!==_0x492b34[_0x14a622])break;}if(_0x14a622===_0x492b34['length'])return!![];}return![];};[_0x589ab7(0x167)]=async()=>{const _0x1de5d4=_0x589ab7,_0x47d337=await this[_0x1de5d4(0x133)](),_0xade8f0=await this['_getMimeType'](_0x47d337),_0x1012b9=_0xade8f0[_0x1de5d4(0x17c)](_0x1de5d4(0x146)),_0x1da9ab=_0xade8f0['startsWith'](_0x1de5d4(0x15d)),_0x1c3e85=_0x1da9ab?await this[_0x1de5d4(0x15c)](_0x47d337):_0x1012b9?_0x47d337:this['crop']==='nobg'?await this[_0x1de5d4(0x11f)](_0x47d337):Object[_0x1de5d4(0x138)](cropType)[_0x1de5d4(0x17c)](this[_0x1de5d4(0x158)])?await this[_0x1de5d4(0x179)](_0x47d337):await this[_0x1de5d4(0x183)](_0x47d337);return await this['addMetadata'](_0x1c3e85);};['toMessage']=async()=>{return{'sticker':await this['build']()};};static async[_0x589ab7(0x16b)](_0x19934c){const _0x47de25=_0x589ab7,_0x4cce43=new Image();await _0x4cce43[_0x47de25(0x105)](_0x19934c);const _0x5f2ff8=_0x4cce43[_0x47de25(0x173)]?.[_0x47de25(0x110)](_0x47de25(0x170))??'{}';return JSON['parse'](_0x5f2ff8['substring'](_0x5f2ff8['indexOf']('{'),_0x5f2ff8[_0x47de25(0x120)]('}')+0x1)??'{}');}}function _0x16c6(_0x5e44cb,_0x26f888){const _0x228859=_0x2288();return _0x16c6=function(_0x16c619,_0x425200){_0x16c619=_0x16c619-0x104;let _0x16a3e8=_0x228859[_0x16c619];return _0x16a3e8;},_0x16c6(_0x5e44cb,_0x26f888);}module[_0x589ab7(0x16f)]={'Sticker':Sticker,'cropStyle':cropStyle};